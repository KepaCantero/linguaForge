@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CALM DARK THEME - Parasympathetic Design System
   "Here I can breathe. Here it's okay to make mistakes."
   Dark mode with calming colors and gentle interactions
   ============================================ */

:root {
  /* === CALM DARK BACKGROUNDS === */
  --background: #1C2127;
  --foreground: #E8EAED;

  --calm-bg-primary: #1C2127;       /* Warm dark blue-gray */
  --calm-bg-secondary: #242A32;     /* Slightly lighter */
  --calm-bg-tertiary: #2D343D;      /* For cards */
  --calm-bg-elevated: #343C47;      /* Elevated elements */

  /* === CALM TEXT COLORS (for dark mode) === */
  --calm-text-primary: #E8EAED;     /* Soft white */
  --calm-text-secondary: #A8B2C0;   /* Muted */
  --calm-text-tertiary: #6B7789;    /* Hints */
  --calm-text-muted: #4A5568;       /* Placeholders */

  /* === SAGE GREEN (Growth, Progress, Nurturing) === */
  --calm-sage-50: #F0F5F1;
  --calm-sage-100: #DCEADF;
  --calm-sage-200: #B8D4BE;
  --calm-sage-300: #94BF9E;
  --calm-sage-400: #72A87D;          /* Primary sage */
  --calm-sage-500: #5A946A;          /* Hover state */
  --calm-sage-600: #487A56;

  /* === BLUE-GRAY SERENITY (Calm Focus) === */
  --calm-blue-50: #F0F4F8;
  --calm-blue-100: #D9E2EC;
  --calm-blue-200: #BCCCDC;
  --calm-blue-300: #9FB3C8;
  --calm-blue-400: #829AB1;          /* Primary blue-gray */
  --calm-blue-500: #627D98;          /* Hover */
  --calm-blue-600: #486581;

  /* === WARM GRAY (Neutral UI) === */
  --calm-warm-50: #FAF9F7;
  --calm-warm-100: #4A5568;
  --calm-warm-200: #3D4852;
  --calm-warm-300: #2D343D;
  --calm-warm-400: #242A32;
  --calm-warm-500: #1C2127;

  /* === SOFT CORAL ACCENT (Encouraging, not alarming) === */
  --calm-accent-50: #FEF5F3;
  --calm-accent-100: #FDE8E3;
  --calm-accent-200: #F9C9BE;
  --calm-accent-300: #F5A898;
  --calm-accent-400: #E8907C;        /* Primary accent */
  --calm-accent-500: #D97B66;
  --calm-accent-600: #C46652;

  /* === SEMANTIC COLORS (Softened) === */
  --calm-success: #72A87D;           /* Sage green - gentle positive */
  --calm-success-bg: rgba(114, 168, 125, 0.15);
  --calm-warning: #D4A76A;           /* Soft gold - warm caution */
  --calm-warning-bg: rgba(212, 167, 106, 0.15);
  --calm-error: #C9807A;             /* Dusty rose - not alarming */
  --calm-error-bg: rgba(201, 128, 122, 0.15);
  --calm-info: #829AB1;              /* Blue-gray - calm information */
  --calm-info-bg: rgba(130, 154, 177, 0.15);

  /* === LEGACY COMPATIBILITY (mapped to calm) === */
  --lf-primary: var(--calm-sage-400);
  --lf-primary-dark: var(--calm-sage-500);
  --lf-primary-light: var(--calm-sage-300);
  --lf-secondary: var(--calm-blue-400);
  --lf-secondary-light: var(--calm-blue-300);
  --lf-accent: var(--calm-accent-400);
  --lf-accent-dark: var(--calm-accent-500);
  --lf-accent-subtle: var(--calm-accent-200);
  --lf-dark: var(--calm-bg-secondary);
  --lf-soft: var(--calm-bg-elevated);
  --lf-muted: var(--calm-text-tertiary);

  /* === GRAYSCALE (dark mode optimized) === */
  --gray-50: #E8EAED;
  --gray-100: #D0D4DA;
  --gray-200: #A8B2C0;
  --gray-300: #6B7789;
  --gray-400: #4A5568;
  --gray-500: #3D4852;
  --gray-600: #2D343D;
  --gray-700: #242A32;
  --gray-800: #1C2127;
  --gray-900: #13171B;

  /* === LEGACY SEMANTIC (mapped to calm) === */
  --success: var(--calm-success);
  --success-dark: var(--calm-sage-500);
  --warning: var(--calm-warning);
  --warning-dark: #C4964F;
  --error: var(--calm-error);
  --error-dark: #B56B65;
  --info: var(--calm-info);

  /* === CALM GRADIENTS (Subtle, dark) === */
  --gradient-mist: linear-gradient(180deg, #1C2127 0%, #242A32 100%);
  --gradient-dawn: linear-gradient(135deg, #1C2127 0%, #2D343D 50%, #1C2127 100%);
  --gradient-breath: linear-gradient(180deg, #242A32 0%, #1C2127 100%);
  --gradient-sage: linear-gradient(135deg, rgba(114, 168, 125, 0.1) 0%, rgba(114, 168, 125, 0.05) 100%);

  /* Legacy gradient mapping */
  --gradient-start: #1C2127;
  --gradient-mid: #242A32;
  --gradient-end: #2D343D;
  --gradient-forge: var(--gradient-dawn);
  --gradient-resonance: var(--gradient-mist);

  /* === CALM SHADOWS (Soft for dark mode) === */
  --shadow-soft-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-soft-md: 0 4px 12px rgba(0, 0, 0, 0.25);
  --shadow-soft-lg: 0 8px 24px rgba(0, 0, 0, 0.3);
  --shadow-soft-xl: 0 16px 40px rgba(0, 0, 0, 0.35);
  --shadow-inner-soft: inset 0 1px 2px rgba(0, 0, 0, 0.1);

  /* === LAYOUT === */
  --header-height: 3.5rem;
  --nav-height: 4rem;
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --content-height: calc(
    100dvh - var(--header-height) - var(--nav-height) - var(--safe-area-top) - var(--safe-area-bottom)
  );

  /* === FLUID TYPOGRAPHY === */
  --text-xs: clamp(0.625rem, 0.5rem + 0.5vw, 0.75rem);
  --text-sm: clamp(0.75rem, 0.625rem + 0.5vw, 0.875rem);
  --text-base: clamp(0.875rem, 0.75rem + 0.5vw, 1rem);
  --text-lg: clamp(1rem, 0.875rem + 0.5vw, 1.125rem);
  --text-xl: clamp(1.125rem, 1rem + 0.5vw, 1.25rem);
  --text-2xl: clamp(1.25rem, 1rem + 1vw, 1.5rem);
  --text-3xl: clamp(1.5rem, 1.25rem + 1vw, 1.875rem);
  --text-4xl: clamp(1.875rem, 1.5rem + 1.5vw, 2.25rem);
  --text-5xl: clamp(2.25rem, 1.75rem + 2vw, 3rem);

  /* === CALM LINE HEIGHTS === */
  --leading-tight: 1.3;
  --leading-normal: 1.7;
  --leading-relaxed: 1.8;

  /* === FLUID SPACING === */
  --space-xs: clamp(0.25rem, 0.125rem + 0.5vw, 0.5rem);
  --space-sm: clamp(0.5rem, 0.25rem + 0.75vw, 0.75rem);
  --space-md: clamp(0.75rem, 0.5rem + 1vw, 1rem);
  --space-lg: clamp(1rem, 0.75rem + 1vw, 1.5rem);
  --space-xl: clamp(1.5rem, 1rem + 1.5vw, 2rem);
  --space-2xl: clamp(2rem, 1.5rem + 2vw, 3rem);

  /* === CALM TRANSITIONS === */
  --transition-gentle: 300ms ease-out;
  --transition-breath: 400ms cubic-bezier(0.25, 0.1, 0.25, 1);
  --transition-float: 500ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* ============================================
   BASE STYLES - Dark, Calm, Breathable
   ============================================ */

@layer base {
  html {
    color-scheme: dark;
  }

  body {
    @apply text-white antialiased;
    background: var(--gradient-mist);
    background-attachment: fixed;
    min-height: 100vh;
    line-height: var(--leading-normal);
    letter-spacing: 0.01em;
  }

  /* Subtle ambient glow - very soft */
  main {
    position: relative;
  }

  main::before {
    content: '';
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    height: 60%;
    background: radial-gradient(
      ellipse 80% 50% at 50% 0%,
      rgba(114, 168, 125, 0.04) 0%,
      transparent 70%
    );
    pointer-events: none;
    z-index: 0;
  }

  /* Calm heading styles */
  h1, h2, h3, h4, h5, h6 {
    line-height: var(--leading-tight);
    letter-spacing: 0.02em;
    font-weight: 500;
  }
}

/* ============================================
   CALM COMPONENTS
   ============================================ */

@layer components {
  /* Calm button */
  .btn-calm {
    @apply relative overflow-hidden rounded-xl;
    @apply px-6 py-3;
    background-color: var(--calm-sage-400);
    color: white;
    transition: var(--transition-breath);
  }

  .btn-calm:hover {
    background-color: var(--calm-sage-500);
    box-shadow: var(--shadow-soft-md);
  }

  .btn-calm:active {
    opacity: 0.9;
  }

  /* Legacy btn-glow - now calm */
  .btn-glow {
    @apply relative overflow-hidden;
    transition: all 0.3s ease;
  }

  .btn-glow:hover {
    transform: none; /* No translateY */
    box-shadow: var(--shadow-soft-md);
  }

  .btn-glow:hover::before {
    opacity: 0; /* No shimmer */
  }

  /* Card with soft shadow on hover */
  .card-glow {
    @apply transition-all duration-300;
  }

  .card-glow:hover {
    box-shadow: var(--shadow-soft-md);
  }

  /* Progress bar - no shimmer */
  .progress-particles::after {
    display: none;
  }

  /* Gentle breathing for active states */
  .node-breathing {
    animation: gentle-pulse 4s ease-in-out infinite;
  }

  @keyframes gentle-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.85;
    }
  }

  /* Legacy breathing - softened */
  @keyframes breathing {
    0%, 100% {
      box-shadow: var(--shadow-soft-sm);
    }
    50% {
      box-shadow: var(--shadow-soft-md);
    }
  }

  /* Text glow disabled */
  .text-glow {
    text-shadow: none;
  }

  /* Gentle float */
  .float {
    animation: gentle-float 6s ease-in-out infinite;
  }

  @keyframes gentle-float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }

  /* Disable particle bursts */
  .particle-burst::before,
  .particle-burst::after {
    display: none;
  }

  /* Calm feedback states */
  .feedback-success {
    background: var(--calm-success-bg);
    border: 1px solid rgba(114, 168, 125, 0.3);
    @apply rounded-xl p-4;
    animation: gentle-appear 400ms ease-out;
  }

  .feedback-error {
    background: var(--calm-error-bg);
    border: 1px solid rgba(201, 128, 122, 0.3);
    @apply rounded-xl p-4;
    animation: gentle-appear 400ms ease-out;
  }

  .feedback-info {
    background: var(--calm-info-bg);
    border: 1px solid rgba(130, 154, 177, 0.3);
    @apply rounded-xl p-4;
    animation: gentle-appear 400ms ease-out;
  }

  @keyframes gentle-appear {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Shimmer slowed */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }
}

/* ============================================
   UTILITIES
   ============================================ */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Safe area padding */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  @supports (padding: max(0px)) {
    .safe-top {
      padding-top: max(var(--safe-area-top), 0.5rem);
    }
    .safe-bottom {
      padding-bottom: max(var(--safe-area-bottom), 0.5rem);
    }
  }

  /* Fluid typography */
  .text-fluid-xs { font-size: var(--text-xs); }
  .text-fluid-sm { font-size: var(--text-sm); }
  .text-fluid-base { font-size: var(--text-base); }
  .text-fluid-lg { font-size: var(--text-lg); }
  .text-fluid-xl { font-size: var(--text-xl); }
  .text-fluid-2xl { font-size: var(--text-2xl); }
  .text-fluid-3xl { font-size: var(--text-3xl); }
  .text-fluid-4xl { font-size: var(--text-4xl); }
  .text-fluid-5xl { font-size: var(--text-5xl); }

  /* Fluid spacing */
  .gap-fluid-xs { gap: var(--space-xs); }
  .gap-fluid-sm { gap: var(--space-sm); }
  .gap-fluid-md { gap: var(--space-md); }
  .gap-fluid-lg { gap: var(--space-lg); }
  .gap-fluid-xl { gap: var(--space-xl); }

  .p-fluid-xs { padding: var(--space-xs); }
  .p-fluid-sm { padding: var(--space-sm); }
  .p-fluid-md { padding: var(--space-md); }
  .p-fluid-lg { padding: var(--space-lg); }
  .p-fluid-xl { padding: var(--space-xl); }

  /* Layout heights */
  .h-header { height: var(--header-height); }
  .h-nav { height: var(--nav-height); }
  .min-h-content { min-height: var(--content-height); }
  .pt-header { padding-top: var(--header-height); }
  .pb-nav { padding-bottom: var(--nav-height); }

  /* Calm gradient text */
  .gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, var(--calm-sage-400) 0%, var(--calm-blue-400) 100%);
  }

  /* Glass morphism for dark mode */
  .glass {
    @apply bg-white/5 backdrop-blur-md border border-white/10;
  }

  /* Inner shadow */
  .inner-glow {
    box-shadow: var(--shadow-inner-soft);
  }

  /* Calm line heights */
  .leading-calm { line-height: var(--leading-normal); }
  .leading-calm-relaxed { line-height: var(--leading-relaxed); }
}

/* ============================================
   SCROLLBAR - Dark, Subtle
   ============================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--calm-bg-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--calm-warm-100);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--calm-text-tertiary);
}

/* Selection - soft sage */
::selection {
  background: rgba(114, 168, 125, 0.5);
  color: #1a202c;
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
}

/* Calm focus state - sage outline */
:focus-visible {
  outline: 2px solid var(--calm-sage-400);
  outline-offset: 2px;
}

/* Screen reader only */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.sr-only:focus,
.not-sr-only {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: inherit !important;
  margin: inherit !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
}
